## Chapter 3. 마이크로서비스 애플리케이션 아키텍쳐
> 소프트웨어의 가치는 행위 가치와 구조 가치로 나뉘고, 소프트웨어를 정말로 부드럽게(Soft) 만드는 것은 구조가치이다. - Robert C. Martin

### 비즈니스 로직은 어디에? - 관심사의 분리

- 비즈니스 로직: 보통 시스템의 목적인 비즈니스 영업의 업무 규칙(Rule), 흐름(Flow), 개념(Concept)
- **관심사의 분리(Separation of concerns)**: 시스템의 각 영역이 처리하는 관심사가 분리되어 잘 관리돼야 한다.

> SI에서 지내면서 느꼈던 문제를 그대로 바라볼 수 있었다. SQL로 비즈니스 로직을 처리하는 것은 결과적으로 유지보수의 어려움을 불러왔기 때문이다.


### 헥사고날 아키텍처와 클린 아키텍처
#### 레이어드 아키텍처

전통적으로 가장 많이 사용되는 아키텍처 이며, 이를 구성하는 레이어는 논리적인 개념이다. 프레젠테이션(Presentation), 비즈니스
로직(Business Logic), 데이터 액세스(Data Access) 3 개의 논리적인 계층으로 구분되어진다.

- 의존성 역전 원칙(DIP, Dependency Inversion Principle)은 만족하는 것으로 보인다.
- 단, 개방 폐쇄의 원칙(OCP, Open-Closed Principle)에서는 문제가 있어 보인다.

#### 헥사고날 아키텍처

- 포트 앤드 어댑터 아키텍처(ports and adapters architecture)라고도 함.
- 고수준의 내부 영역이 외부의 구체 어댑터에 전혀 의존하지 않게 하는 것이 특징

#### 클린 아키텍처

- Entity, Use Case, ...

### 마이크로서비스의 내부 구조 정의
- 지향하는 관심사에 따라 응집성을 높이고 관심사가 다른 영역과는 의존도를 낮추게 해야 한다.
- 업무 규칙을 정의하는 비즈니스 로직 영역을 다른 기술 기반 영역으로부터 분리하기 위해 노력한다.
- 세부 기술 중심, 저수준의 외부 영역과 핵심 업무 규칙이 정의된 고수준의 내부 영역으로 구분한다.
- 고수준 영역은 저수준 영역에 의존하지 않게 해야 하며, 저수준 영역이 고수준 영역에 의존하게 해야 한다.
- 저수준 영역은 언제든지 교체, 확장 가능해야 하며 이같은 변화가 고수준 영역에 영향을 줘서는 안된다.
- 자바처럼 인터페이스 및 추상 클래스를 지원하는 언어의 경우, 저수준 여역의 구체 클래스가 고수준 영역의 추상 인터페이스에 의존하게 하는 의존성 역전의 원칙을 적용한다.
- 인터페이스는 고수준의 안정된 영역에 존재해야 하며, 저수준의 어댑터가 이를 구현한다.

#### 트랜잭션 스크립트 패턴(Transaction Script)
도메인 객체가 행위를 가지고 있지 않고, 모든 비즈니스 행위의 책임은 서비스에 둔다.
이는, 절차식 프로그래밍 방식과 같기 때문에, 비즈니스가 간단한 경우에는 쉽게 적용할 수 있으나 복잡해지는 경우 서비스 코드의 양이 증가한다.

#### 도메인 모델 패턴(Domain Model Pattern)
도메인이 데이터 뿐만 아니라 비즈니스 행위를 직접 가지고 있으며, 도메인 객체가 소유한 데이터는 도메인 객체가 제공하는 행위에 의해 은닉된다.

### 애그리거트 패턴(Aggregate Pattern)
최상위에 존재하는 엔티티(Root Entity)를 중심으로 개념의 집합을 분리한 개념

## Chapter 4. 마이크로서비스와 애자일 개발 프로세스
> 성숙한 개발문화가 정착되지 않은 팀에서 애자일의 도입은 2~3주의 스프린트가 기존의 워터폴 일정을 단기간으로 축소한
> 고된 행군의 축약 버전이 되거나 계속된 시행착오의 연속으로 중도에 워터폴 방식으로 돌아갈 수 있다.

### 도메인 주도 설계와 마이크로서비스
- 전략적 설계(strategic design)
- 전술적 설계(tactical design)


---
2022.06.08 스터디 하면서 나눈 내용들

- 추상화의 수준을 어떻게 가져갈 것인가
- [도메인](https://youtu.be/kmUneexSxk0?t=514)