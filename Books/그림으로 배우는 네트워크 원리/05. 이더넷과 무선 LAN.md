# 5.1 같은 네트워크 내에서의 전송을 반복한다

> 서버는 PC나 스마트폰과 같이 애플리케이션과는 멀리 떨어진 다른 네트워크에 접속되어 있음

**네트워크**
- 기술적인 관점에서 **라우터 또는 레이어 3 스위치로 구획되는 범위**
- 레이어2 스위치로 하나의 네트워크 구성, 라우터 또는 레이어3 스위치로 각 네트워크 연결

- 다른 네트워크에 접속된 서버까지의 데이터 전송은 같은 네트워크 내의 전송을 반복하는 것
	- 같은 네트워크 상에 있는 라우터로 전송
	- 라우터는 같은 네트워크 상의 다음 라우터로 전송
	- 목적지 네트워크 상의 라우터까지 도달하면, 해당 라우터가 서버로 데이터 전송

- 이더넷, 무선 LAN(Wi-Fi)
	- 네트워크 인터페이스 계층

# 5.2 데이터를 전송하는 이더넷

**이더넷**
- 네트워크 인터페이스층의 프로토콜
- 같은 네트워크 내의 어떤 인터페이스에서부터 다른 이더넷 인터페이스까지 데이터 전송
- 같은 레이어2 스위치에 연결된 PC는 같은 네트워크에 접속된 것
	- VLAN을 이용하면 같은 레이어2 스위치에 접속되어 있어도 다른 네트워크처럼 다룰 수 있음
	- 레이어2 스위치는 이더넷으로 전송하는 데이터에 변경을 가하지 않음
- PC, 서버, 레이어2 스위치 등 이더넷 인터페이스가 있는 기기끼리 연결해서 이더넷 링크를 만들면 유선네트워크가 됨

# 5.3 이더넷의 규격
> 이더넷 규격은 IEEE802 위원회에서 결정

| 규격이름        |             | 전송속도     | 전송매체                |
| ----------- | ----------- | -------- | ------------------- |
| IEEE802.3   | 10BASE5     | 10Mbps   | 동축 케이블              |
| IEEE802.3a  | 10BASE2     |          | 동축 케이블              |
| IEEE802.3i  | 10BASE-T    |          | UTP 케이블(카테고리3 이상)   |
| IEEE802.3u  | 100BASE-TX  | 100Mbps  | UTP 케이블(카테고리5 이상)   |
|             | 100BASE-FX  |          | 광섬유 케이블             |
| IEEE802.3z  | 1000BASE-SX | 1000Mbps | 광섬유 케이블             |
|             | 1000BASE-LS |          | 광섬유 케이블             |
| IEEE802.3ab | 1000BASE-T  |          | UTP 케이블(카테고리5e 이상)  |
| IEEE802.3ae | 10GBASE-LX4 | 10Gbps   | 광섬유 케이블             |
| IEEE802.3an | 10GBASE-T   |          | UTP 케이블(카테고리 6A 이상) |

- IEEE802.3로 시작되는 이름과 1000BASE-T처럼 전송 속도와 전송 매체의 특징을 조합한 이름이 있음
	- 전송속도: 물리적인 신호로 데이터를 변환하여 전달하는 최대 속도
	- 1000
		- 전송 속도
		- Mbps 단위
	- BASE
		- 베이스 밴드 방식
		- 현재는 베이스 밴드 방식 외에 사용하지 않음
	- - 뒤는 전송매체나 물리 신호 변환의 특징
		- T: UTP 케이블
			- 흔히 말하는 LAN 케이블
		- 숫자: 동축 케이블
			- 100m 단위 케이블의 최대 길이

# 5.4 인터페이스는 어느 것?
> 이더넷 인터페이스 간에 데이터를 전송하므로, 이더넷 인터페이스를 특정할 수 있어야 하는데, 이를 위해서 MAC 주소가 존재함

**MAC 주소**
- 48비트 주소
	- 선두 24비트: OUI
		- 이더넷 인터페이스를 제조하는 벤더(메이커) 식별 코드
	- 그 뒤 24비트: 시리얼 넘버
		- 각 벤더가 할당
		- 이더넷 인터페이스에 미리 할당 되어 있어 변경할 수 없음
- 물리주소
- 하드웨어 주소
- 표기
	- 16진수로 표기
		- 1바이트씩 16진수로 변환하고 '-'로 구분
		- 1바이트씩 16진수로 변환하고 ':'로 구분
		- 2바이트씩 16진수로 변환하고 '.'로 구분

# 5.5 일반적으로 사용되는 인터페이스와 케이블
> 보편적으로 '10BASE-T', '100BASE-T', '1000BASE-T', '10GBASE-T'를 많이 사용하며 모두 RJ-45 이더넷 인터페이스와 UTP 케이블 사용

**UTP 케이블**
- LAN 케이블
- 8줄의 절연체로 감싼 구리선을 2줄씩 꼬아서 4쌍으로 만든 케이블

**RJ-45 이더넷 인터페이스**
- UTP 케이블용 이더넷 인터페이스\

# 5.6 데이터 형식

**이더넷 프레임**
- 전송할 데이터에 이더넷 헤더와 FCS를 붙임
	- FCS
		- 4Byte
		- 에러 체크를 위한 정보
	- 이더넷 헤더
		- 목적지 MAC 주소
			- 6 Byte
		- 출발지 MAC 주소
			- 6 Byte
		- 타입 코드
			- 2 Byte
			- 운반할 대상의 데이터
			- TCP/IP: IPv4에 해당하는 0x0800
	- 전송할 데이터
		- 64바이트 ~ 1500바이트
		- MTU(Maximum Transmission Unit)을 넘는 크기의 데이터는 복수로 분할해서 전송
	- 64 ~ 1518바이트

# 5.7 어떻게 접속하는가?

**토폴로지(topology)**
- 네트워크에서 기기를 연결하는 형태
	- 버스형
	- 스타형
	- 링형
	- ...

**초기 이더넷은 버스형**
- 하나의 전송 매체를 복수의 기기가 공유
- 전송매체를 어떻게 공유할 것인지 제어해야 함
	- CSMA/CD

- 현재는 버스형에서 레이어2 스위치를 중심으로 하는 스타형 토폴로지로 옮겨가는 중

# 5.8 데이터 전송 타이밍 제어
- 전송 매체를 공유하는 초기의 버스형 토폴로지에서는 복수의 기기가 동시에 데이터 전송을 할 수 없음
- 어떤 순간에 데이터를 전송할 수 있는 것은 한 대 뿐
	- 동축 케이블 위를 전기 신호로써 흘러가지만, 전기 신호가 흐르는 회로는 하나뿐이기 때문

**CSMA/CD(Carrier Sense Multiple Access with Collision Detector)**
- 먼저 가는 쪽이 승자
- CS
	- 케이블이 현재 사용 중인지 감지
- 동시에 비었다고 판단하여 전송할 경우 전기신호가 충돌
	- 해당 충돌을 감지하여 데이터 재전송
	- 단, 랜덤한 시간을 대기하여 타이밍을 어긋나게 함
- 현재는 전송매체를 공유하지 않음으로 사용하지 않음

# 5.9 이더넷 네트워크를 만든다

**레이어2 스위치**
- 이더넷을 이용한 네트워크 하나를 구성하는 네트워크 기기
- 레이어2 스위치를 여러 대 연결해도 하나의 네트워크
- 이더넷 프레임을 전송하기 위해 이더넷 헤더의 MAC 주소 확인
- 네트워크의 입구
	- 많은 이더네 인터페이스 존재
	- 네트워크에 접속하기 위해 가장 먼저 접속해야 함
	- 액세스 스위치
	- 스위칭 허브

# 5.10 레이어2 스위치의 동작
- 수신한 이더넷 프레임의 출발지 MAC 주소를 MAC 주소 테이블에 등록
- 목적지 MAC 주소와 MAC 주소 테이블에서 전송할 포트를 결정해, 이더넷 프레임 전송
	- 존재하지 않는 MAC 주소인 경우 수신 포트를 제외한 모든 포트로 이더넷 프레임 전송
		- 플러딩
		- Unknown 유니캐스크 프레임
			- 등록되지 않은 MAC 주소가 목적지로 되어 있는 이더넷 프레임
- 모르면 일단 전송해둔다

# 5.11 MAC 주소 테이블 관리

- 하나의 포트에 반드시 하나의 MAC 주소만 등록된다고 할 수 없음
- 스위치에 자체에 접속된 기기의 MAC 주소뿐 아니라 하나의 포트에 복수의 MAC 주소

