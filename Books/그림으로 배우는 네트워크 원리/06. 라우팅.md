> 이더넷과 무선 LAN 그리고 레이어2 스위치로 같은 네트워크 안에서 데이터를 전송할 수 있음을 알게 되었다. 그럼 네트워크에서 다른 네트워크로 전송을 할 때는 어떻게 해야 할까?

# 6.1 외부 네트워크로 데이터를 보낸다
> 라우터는 데이터의 목적지가 어느 네트워크에 접속해 있는지 판단해서, 연결된 네트워크의 라우터로 전송한다.

- 반복된 라우팅을 통해서 외부 네트워크로 데이터를 전송

**운반하는 데이터는 IP 패킷**
- 라우터는 IP 패킷을 전송
- 라우팅 동작은 인터넷층에서 동작
	- IP 패킷이 TCP/IP 계층에서 인터넷층이므로
- IP 헤더 내의 목적지 IP 주소 확인
	- IP 헤더의 TTL과 헤더 체크섬만 변경
		- 나머지는 변경하지 않은 채로 전송
		- NAT 주소 변환이 이루어지는 경우 IP 주소도 변경됨
	- 이더넷 헤서와 FCS는 라우터가 전송할 때 완전히 교체
		- 연결된 네트워크에 있는 다른 라우터까지 보내기 위한 것이기 때문

# 6.2 라우터에서 네트워크 연결에 필요한 주소 설정
> 네트워크에 접속한다는 것 = IP 주소 설정
> 라우터로 복수의 네트워크를 연결할 때도 IP 주소를 설정함

**네트워크 연결**
- 라우터 인터페이스의 물리적 배선에 더해 IP 주소를 설정해야 함
- 각 인터페이스에 IP 주소를 설정하여 각 네트워크에 연결
	- 192.168.1.254/24로 설정할 경우, 192.168.1.0/24 네트워크에 접속할 수 있게 됨

# 6.3 데이터의 전송처를 결정한다

- 라우팅 대상인 IP 패킷을 수신한다.
	- IP 패킷 수신
		- 목적지 레이어2 주소(MAC 주소): 라우터
		- 목적지 IP 주소: 라우터의 IP 주소 이외
- 경로 정보를 검색해서 전송할 곳을 결정한다.
	- 라우팅 테이블 상의 경로 정보 검색 후 전송할 곳 결정
	- 넥스트 홉(다음에 전송할 라우터) 파악
	- 레이어2 헤더 수정, IP 패킷 전송

# 6.4 다음 라우터로 데이터를 전송한다

- 넥스트 홉에 데이터를 전송하기 위해서는 넥스트 홉의 MAC 주소가 필요
- ARP 실행
	- IP 주소로 MAC 주소 구하는 프로토콜
- 새로운 이더넷 헤더로 변경, FCS 새로 추가
- IP 헤더 변경
	- IP 주소는 그대로
		- NAT로 IP 로 주소를 변환할 때는 변경됨
	- TTL -1 처리, 헤더 체크섬 재계산

# 6.5 최종 주소를 확인한다

- 넥스트 홉에서도 동일하게 라우팅 처리 수행
- 라우팅 테이블에서 일치하는 IP 주소 탐색 후, 직접 접속되어 있는 호스트인 경우 같은 네트워크에 있음을 알 수 있게 됨

# 6.6 최종 목적지로 데이터를 보낸다

