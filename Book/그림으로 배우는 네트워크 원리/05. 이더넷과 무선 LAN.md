# 5.1 같은 네트워크 내에서의 전송을 반복한다

> 서버는 PC나 스마트폰과 같이 애플리케이션과는 멀리 떨어진 다른 네트워크에 접속되어 있음

**네트워크**
- 기술적인 관점에서 **라우터 또는 레이어 3 스위치로 구획되는 범위**
- 레이어2 스위치로 하나의 네트워크 구성, 라우터 또는 레이어3 스위치로 각 네트워크 연결

- 다른 네트워크에 접속된 서버까지의 데이터 전송은 같은 네트워크 내의 전송을 반복하는 것
	- 같은 네트워크 상에 있는 라우터로 전송
	- 라우터는 같은 네트워크 상의 다음 라우터로 전송
	- 목적지 네트워크 상의 라우터까지 도달하면, 해당 라우터가 서버로 데이터 전송

- 이더넷, 무선 LAN(Wi-Fi)
	- 네트워크 인터페이스 계층

# 5.2 데이터를 전송하는 이더넷

**이더넷**
- 네트워크 인터페이스층의 프로토콜
- 같은 네트워크 내의 어떤 인터페이스에서부터 다른 이더넷 인터페이스까지 데이터 전송
- 같은 레이어2 스위치에 연결된 PC는 같은 네트워크에 접속된 것
	- VLAN을 이용하면 같은 레이어2 스위치에 접속되어 있어도 다른 네트워크처럼 다룰 수 있음
	- 레이어2 스위치는 이더넷으로 전송하는 데이터에 변경을 가하지 않음
- PC, 서버, 레이어2 스위치 등 이더넷 인터페이스가 있는 기기끼리 연결해서 이더넷 링크를 만들면 유선네트워크가 됨

# 5.3 이더넷의 규격
> 이더넷 규격은 IEEE802 위원회에서 결정

| 규격이름        |             | 전송속도     | 전송매체                |
| ----------- | ----------- | -------- | ------------------- |
| IEEE802.3   | 10BASE5     | 10Mbps   | 동축 케이블              |
| IEEE802.3a  | 10BASE2     |          | 동축 케이블              |
| IEEE802.3i  | 10BASE-T    |          | UTP 케이블(카테고리3 이상)   |
| IEEE802.3u  | 100BASE-TX  | 100Mbps  | UTP 케이블(카테고리5 이상)   |
|             | 100BASE-FX  |          | 광섬유 케이블             |
| IEEE802.3z  | 1000BASE-SX | 1000Mbps | 광섬유 케이블             |
|             | 1000BASE-LS |          | 광섬유 케이블             |
| IEEE802.3ab | 1000BASE-T  |          | UTP 케이블(카테고리5e 이상)  |
| IEEE802.3ae | 10GBASE-LX4 | 10Gbps   | 광섬유 케이블             |
| IEEE802.3an | 10GBASE-T   |          | UTP 케이블(카테고리 6A 이상) |

- IEEE802.3로 시작되는 이름과 1000BASE-T처럼 전송 속도와 전송 매체의 특징을 조합한 이름이 있음
	- 전송속도: 물리적인 신호로 데이터를 변환하여 전달하는 최대 속도
	- 1000
		- 전송 속도
		- Mbps 단위
	- BASE
		- 베이스 밴드 방식
		- 현재는 베이스 밴드 방식 외에 사용하지 않음
	- - 뒤는 전송매체나 물리 신호 변환의 특징
		- T: UTP 케이블
			- 흔히 말하는 LAN 케이블
		- 숫자: 동축 케이블
			- 100m 단위 케이블의 최대 길이

# 5.4 인터페이스는 어느 것?
> 이더넷 인터페이스 간에 데이터를 전송하므로, 이더넷 인터페이스를 특정할 수 있어야 하는데, 이를 위해서 MAC 주소가 존재함

**MAC 주소**
- 48비트 주소
	- 선두 24비트: OUI
		- 이더넷 인터페이스를 제조하는 벤더(메이커) 식별 코드
	- 그 뒤 24비트: 시리얼 넘버
		- 각 벤더가 할당
		- 이더넷 인터페이스에 미리 할당 되어 있어 변경할 수 없음
- 물리주소
- 하드웨어 주소
- 표기
	- 16진수로 표기
		- 1바이트씩 16진수로 변환하고 '-'로 구분
		- 1바이트씩 16진수로 변환하고 ':'로 구분
		- 2바이트씩 16진수로 변환하고 '.'로 구분

# 5.5 일반적으로 사용되는 인터페이스와 케이블
> 보편적으로 '10BASE-T', '100BASE-T', '1000BASE-T', '10GBASE-T'를 많이 사용하며 모두 RJ-45 이더넷 인터페이스와 UTP 케이블 사용

**UTP 케이블**
- LAN 케이블
- 8줄의 절연체로 감싼 구리선을 2줄씩 꼬아서 4쌍으로 만든 케이블

**RJ-45 이더넷 인터페이스**
- UTP 케이블용 이더넷 인터페이스\

# 5.6 데이터 형식

**이더넷 프레임**
- 전송할 데이터에 이더넷 헤더와 FCS를 붙임
	- FCS
		- 4Byte
		- 에러 체크를 위한 정보
	- 이더넷 헤더
		- 목적지 MAC 주소
			- 6 Byte
		- 출발지 MAC 주소
			- 6 Byte
		- 타입 코드
			- 2 Byte
			- 운반할 대상의 데이터
			- TCP/IP: IPv4에 해당하는 0x0800
	- 전송할 데이터
		- 64바이트 ~ 1500바이트
		- MTU(Maximum Transmission Unit)을 넘는 크기의 데이터는 복수로 분할해서 전송
	- 64 ~ 1518바이트

# 5.7 어떻게 접속하는가?

**토폴로지(topology)**
- 네트워크에서 기기를 연결하는 형태
	- 버스형
	- 스타형
	- 링형
	- ...

**초기 이더넷은 버스형**
- 하나의 전송 매체를 복수의 기기가 공유
- 전송매체를 어떻게 공유할 것인지 제어해야 함
	- CSMA/CD

- 현재는 버스형에서 레이어2 스위치를 중심으로 하는 스타형 토폴로지로 옮겨가는 중

# 5.8 데이터 전송 타이밍 제어
- 전송 매체를 공유하는 초기의 버스형 토폴로지에서는 복수의 기기가 동시에 데이터 전송을 할 수 없음
- 어떤 순간에 데이터를 전송할 수 있는 것은 한 대 뿐
	- 동축 케이블 위를 전기 신호로써 흘러가지만, 전기 신호가 흐르는 회로는 하나뿐이기 때문

**CSMA/CD(Carrier Sense Multiple Access with Collision Detector)**
- 먼저 가는 쪽이 승자
- CS
	- 케이블이 현재 사용 중인지 감지
- 동시에 비었다고 판단하여 전송할 경우 전기신호가 충돌
	- 해당 충돌을 감지하여 데이터 재전송
	- 단, 랜덤한 시간을 대기하여 타이밍을 어긋나게 함
- 현재는 전송매체를 공유하지 않음으로 사용하지 않음

# 5.9 이더넷 네트워크를 만든다

**레이어2 스위치**
- 이더넷을 이용한 네트워크 하나를 구성하는 네트워크 기기
- 레이어2 스위치를 여러 대 연결해도 하나의 네트워크
- 이더넷 프레임을 전송하기 위해 이더넷 헤더의 MAC 주소 확인
- 네트워크의 입구
	- 많은 이더네 인터페이스 존재
	- 네트워크에 접속하기 위해 가장 먼저 접속해야 함
	- 액세스 스위치
	- 스위칭 허브

# 5.10 레이어2 스위치의 동작
- 수신한 이더넷 프레임의 출발지 MAC 주소를 MAC 주소 테이블에 등록
- 목적지 MAC 주소와 MAC 주소 테이블에서 전송할 포트를 결정해, 이더넷 프레임 전송
	- 존재하지 않는 MAC 주소인 경우 수신 포트를 제외한 모든 포트로 이더넷 프레임 전송
		- 플러딩
		- Unknown 유니캐스크 프레임
			- 등록되지 않은 MAC 주소가 목적지로 되어 있는 이더넷 프레임
- 모르면 일단 전송해둔다

# 5.11 MAC 주소 테이블 관리

- 하나의 포트에 반드시 하나의 MAC 주소만 등록된다고 할 수 없음
	- 스위치에 자체에 접속된 기기의 MAC 주소뿐 아니라 하나의 포트에 복수의 MAC 주소가 등록됨
- 접속포트가 바뀌는 경우 등이 있으므로 영구적으로 보관하지 않음
	- 일반적으로 5분
	- 데이터 수신시 제한 시간 재설정

# 5.12 데이터 전송과 동시에 수신한다

- 레이어2 스위치 기반의 이더넷 네트워크에서는 데이터 송수신을 동시에 할 수 있음
	- 전이중 통신
		- <-> 반이중 통신
			- 송신과 수신을 동시에 할 수 없어 전환하면서 처리
			- 초기 이더넷의 버스형 토폴로지
			- 특정 시간에는 한 대만 데이터를 전송, 나머지는 수신만 할 수 있었음
	- 데이터 수신용과 송신용으로 전송 매체를 나누어 사용
		- 1Gbps 이더넷 규격에서는 전이중 통신 방식이 다름
	- UTP 케이블은 실질적으로 4줄로 구성되어 있고, 그 중 1조를 송신용, 1조를 수신용으로 전기 신호를 흘려보냄
	- 100BASE-TX로 전이중 통신 시, 송신 100Mbps, 수신 100Mbps 데이터 통신 가능

# 5.13 케이블 없이 간편하게 네트워크를 만든다

- 케이블 없이 간편하게 네트워크를 만들기 위해 무선 LAN 개발
- 무선 LAN 액세스 포인트
	- 무선 LAN 데이터 통신은 무선 LAN 액세스 포인트를 경유
	- 이렇게 데이터를 주고 받는 것을 **인프라스트럭처 모드** 라고 함
		- 무선 LAN 인터페이스끼리 직접 주고받는 것을 애드혹 모드
- 무선 LAN 인터페이스
	- 노트북 컴퓨터, 스마트폰/태블릿에 미리 내장되어 있음
	- 인터페이스로 무선 LAN에 연결된 기기를 무선 LAN 클라이언트
- 요청을 보낼 목적지 서버는 대부분 유선 이더넷 사용
	- 무선 LAN 액세스 포인트는 레이어2 스위치와 접속해 유선 이더넷 네트워크와도 연결

# 5.14 무선 LAN에도 규격이 많다

- 무선 LAN 규격은 이용하는 전파의 주파수 대역으로 나뉨

| 규격 이름        | 책정시기      | 주파수대            | 전송속도               |
| ------------ | --------- | --------------- | ------------------ |
| IEEE802.11b  | 1999년 10월 | 2.4GHz 대        | 11Mbps             |
| IEEE802.11a  | 1999년 10월 | 5GHz 대          | 54Mbps             |
| IEEE802.11g  | 2003년 6월  | 2.4GHz 대        | 54Mbps             |
| IEEE802.11n  | 2009년 9월  | 2.4GHz / 5GHz 대 | 65 - 600 Mbps      |
| IEEE802.11ac | 2014년 1월  | 5GHz 대          | 290Mbps ~ 6.5 Gbps |

**Wi-Fi**
- 과거에는 무선 LAN 기기끼리 호환이 되지 않아, 제조사가 다른 경우 접속이 불가능하기도 했음
- Wi-Fi Aliaance라는 단체가 무선 LAN 기기의 상호 접속성을 인증한 브랜드를 Wi-Fi라고 함

# 5.15 무선 LAN에 연결한다

**어소시에이션(association)**
- 무선 LAN 액세스 포인트에 연결해서 무선 LAN 링크를 확립하는 것

**SSID(Service Set Identifier)**
- 무선 LAN의 논리적인 그룹을 식별하는 식별정보
- 무선 LAN 액세스 포인트에는 최대 32문자의 문자열로 SSID를 지정해둠

- 무선 LAN 클라이언트는 액세스 포인트가 내보내는 제어신호(비콘)에서 이용할 수 있는 전파의 주파수(채널)를 찾음
- 이용할 수 있는 채널을 발견하면 SSID를 지정해서 무선 LAN 액세스 포인트에 어소시에이션 요청 전송
- 액세스 포인트는 접속할 수 있는지 응답
- 암호화나 인증 등의 보안 설정은 SSID 별로 진행

# 5.16 전파는 돌려쓴다
> 무선 LAN은 규격에서 정한 속도대로 통신할 수 있는 경우가 거의 없음

**실효속도, 스루풋**
- 애플리케이션을 이용할 때의 실질적인 통신 속도
- 보편적으로 무선 LAN의 스루풋은 규격상 전송속도의 절반 정도

**무선 LAN의 충돌**
- 무선 LAN의 전송매체는 **전파**
- 복수의 클라이언트가 어소시에이션하고 있으면, 전파를 공유해서 이용함
- 특정 순간에 무선 LAN에 데이터를 전파에 실어 송신할 수 있는 것은 하나의 클라이언트
- 동시에 보내버리면 충돌(collision) 발생

# 5.17  충돌이 일어나지 않게 데이터를 전송한다

**CSMA/CA**
- Carrier Sense Multiple Access with Collision Avoidance
- 빠른 쪽이 이기는 방식으로 전파를 이용
	- 전파가 이용 중인지 확인
		- 전송 시, 전파가 이용 중인지 아닌지 확인
		- 채널의 전파를 검출하면 이용중인지 확인할 수 있음
	- 랜덤 시간 대기
	- 데이터 송신
		- 데이터 수신 시 수신 확인 응답으로 ACK 반환
		- 다른 클라이언트가 사용중이라면 기다려야함

이러한 이유로, 무선 LAN의 스루풋은 저하됨

# 5.18 무선 LAN의 보안

- 악의를 가진 사용자에게도 편리
	- 간편하고 편리한 만큼, 악의를 가진 사용자에게도 동일함
- 무선 LAN 보안의 핵심
	- 인증
		- 정식 사용자만 접속할 수 있게 함
	- 암호화
		- 송수신 데이터 암호화를 통해 3자에게 새어나가는 것 방지
- 무선 LAN 보안 규격
	- WPA2
		- IEEE802.11i
		- 데이터 암호화에 AES, 인증에 IEEE802.1X 이용
		- 대부분의 무선 LAN 기기는 거의 WPA2 보안 규격을 지원함