# 1. 처리량과 응답시간

## 1.1 응답시간

> 사용자의 요청을 처리하는데 걸리는 시간

전형적인 API 호출 과정을 기준으로 보면, 다음의 단계를 거치게 되고 이 요청을 처리하는데 걸린 시간을 응답시간으로 볼 수 있다.
- 서버에 연결
	- TCP를 이용해 서버 연결
- 서버로 데이터 전송
	- 프로토콜에 따라 데이터를 전송하는데, HTTP 프로토콜에 따라 JSON 데이터를 POST 방식으로 전송할 수 있음
- 서버 실행(비즈니스 로직 수행)
	- DB 연동, 로직 수행, 외부 API 연동, 응답 데이터 생성
- 클라이언트로 데이터 전송

응답 시간은 크게 2가지로 나누어 측정할 수 있다.
- TTFB(Time to First Byte): 첫 번째 바이트가 도착할 때까지 걸린 시간
- TTLB(Time to Last Byte): 마지막 바이트가 도착할 때까지 걸린 시간

> 응답 시간이 길어질수록 사용자의 검색 횟수, 매출은 감소한다.

## 1.2 처리량

> 단위 시간당 시스템이 처리하는 작업량

초당 트랜잭션 수와 초당 요청 수 등 다양한 측정 지표가 있지만 보편적으로 TPS를 사용한다.
- TPS(Transaction Per Second)
- RPS(Request Per Second)

최대 TPS란 시스템이 처리할 수 있는 최대 요청 수를 의미하며, 최대 TPS가 5인 경우 7의 요청이 들어왔을 때 2의 요청은 대기하는 상태가 된다. 지연 상태가 길어지면 이탈에 직접적인 영향을 주므로, 2가지 방법을 고려할 수 있다.
- 서버가 동시에 처리할 수 있는 **요청 수를 늘려** 대기 시간 줄이기
- **처리 시간 자체를 줄여** 대기 시간 줄이기

# 2. 서버 성능 개선 기초
## 2.1 병목 지점

서비스 초기에는 성능 문제가 잘 발생하지 않는다. 사용자 수가 늘어남에 따라 트래픽이 늘고 데이터가 쌓임에 따라 응답시간이 점점 느려지는 현상이 발생하게 된다. 이러한 현상이 주로 발생하는 이유는 시스템이 수용할 수 있는 최대 TPS를 초과하는 트래픽이 유입되기 때문이다.

성능 문제를 해결하기 위해서는 문제가 발생하는 **병목지점**을 찾아야 한다.
- 모니터링 도구를 이용해 처리 시간이 오래 걸리는 작업 식별하기
- 

## 2.2 수직 확장과 수평 확장



---
# 심화

### 1. 응답시간과 처리량을 측정할 수 있는 도구는 어떤 게 있을까?

### 2. TTLB는 마지막 바이트가 도착했다는 것을 어떤 기준으로 측정하게 되는 걸까?

### 3. Spring에서 최대 TPS가 초과되어 대기하는 요청들은 어디서 대기할까?
